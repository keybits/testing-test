machine:
  pre:
    - cat ~/.ssh/authorized_keys
  python:
    version: 3.5.1
#  php:
#    version: 7.0.4
#  node:
#    version: 6.1.0
#  ruby:
#    version: 2.3.1
#    - redis
  environment:
    SHORT_GIT_HASH: $(echo $CIRCLE_SHA1 | cut -c -7)


#dependencies:
  #pre:
  #  - npm install browserify

test:
  override:
    - case $CIRCLE_NODE_INDEX in 0) nosetests tests/test1.py ;; 1) nosetests tests/test2.py ;; esac:
        parallel: true
  post:
    - echo $CIRCLE_NODE_INDEX:
        parallel: true
    - set |grep CIRCLE
    - touch $CIRCLE_ARTIFACTS/file.txt
    - echo $SHORT_GIT_HASH

deployment:
  production:
    branch: master
    commands:
      - "true"
